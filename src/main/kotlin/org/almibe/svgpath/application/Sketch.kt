package org.almibe.svgpath.application

import javafx.scene.canvas.Canvas
import javafx.scene.paint.Color
import org.almibe.svgpath.SVGPath
import org.almibe.svgpath.SVGPathParser

class Sketch(private val canvas: Canvas) {
    private val parser = SVGPathParser()
    private val trebleClefPath: SVGPath = parser.parse("M 31.27789999999999 82.09043000000003 C 29.032789999999977 82.55090000000001 26.952159999999992 83.78287999999998 24.96627000000001 85.74540999999999 C 22.977919999999983 87.74396000000002 21.913509999999974 90.02348 21.739520000000027 92.54543999999999 C 21.630150000000015 94.13062000000002 22.047540000000026 95.96938999999998 22.963070000000016 97.95110999999997 C 23.876089999999976 99.96891000000005 25.368100000000027 101.48361 27.364359999999976 102.52634999999998 C 28.04054000000002 102.71779000000004 28.340689999999995 103.10049000000004 28.305889999999977 103.60488999999995 C 28.293479999999988 103.78506000000004 28.02825999999999 103.94772999999998 27.40440000000001 104.04948000000002 C 24.175369999999987 102.99406999999997 21.588729999999998 101.04183 19.675689999999975 98.26727000000005 C 17.765120000000024 95.45672000000002 16.890570000000025 92.35561999999999 17.056939999999997 88.89195999999998 C 17.421310000000005 85.18857000000003 18.779420000000016 81.80718000000002 21.12876 78.78374000000002 C 23.51672000000002 75.72681999999998 26.45395000000002 73.64893000000001 29.940459999999973 72.55016 L 28.33114999999998 59.58836000000002 C 22.45170999999999 63.81614000000002 17.607079999999996 68.29635000000002 13.756199999999978 73.09852999999998 C 9.907819999999987 77.86464999999998 7.726889999999997 83.18023 7.177269999999993 89.04280999999997 C 7.06801999999999 91.67779000000002 7.433230000000009 94.27314999999999 8.27534 96.79280999999997 C 9.11497 99.34851000000003 10.477599999999995 101.68687999999997 12.35818999999998 103.88000999999997 C 16.157989999999984 108.23271999999997 21.319819999999993 110.72464000000002 27.768970000000024 111.38689999999997 C 29.981780000000015 111.39471000000003 32.356420000000014 111.16043000000002 34.92899 110.68633999999997 L 31.27789999999999 82.09043000000003 z M 33.90280999999999 81.90958999999998 L 37.624829999999974 110.00367000000006 C 43.340239999999994 108.15362000000005 46.456439999999986 103.48179000000005 46.968500000000006 96.06009999999998 C 46.81497000000002 93.55174 46.246849999999995 91.26821999999999 45.15573999999998 89.20191999999997 C 44.10325999999998 87.10217 42.623670000000004 85.40732000000003 40.68092999999999 84.11484999999999 C 38.738189999999975 82.82242000000002 36.50290000000001 82.08899000000002 33.90280999999999 81.90958999999998 z M 29.084900000000005 43.929880000000026 C 30.326300000000003 43.29156999999998 31.78557999999998 42.12531999999999 33.38799 40.462109999999996 C 34.98791 38.83494999999999 36.574070000000006 36.88105999999999 38.10539 34.66996 C 39.675340000000006 32.425340000000006 40.95890000000003 30.124770000000012 41.955989999999986 27.76823999999999 C 42.950620000000015 25.447720000000004 43.50445000000002 23.20537999999999 43.64864 21.115779999999972 C 43.710789999999974 20.21508 43.70069000000001 19.309410000000014 43.574810000000014 18.504340000000013 C 43.51985000000002 17.197360000000003 43.19220999999999 16.161189999999976 42.55333000000002 15.42928999999998 C 41.91192000000001 14.733450000000005 41.07008999999999 14.31337000000002 39.98673000000002 14.23863 C 37.81997000000001 14.08911999999998 35.77796999999998 15.287539999999979 33.86063999999999 17.83398999999997 C 32.36540000000002 20.047590000000014 31.057020000000023 22.708460000000002 30.04876999999999 25.75200000000001 C 29.001950000000022 28.829099999999983 28.31873999999999 31.895089999999982 28.030239999999992 35.02449999999999 C 27.96472 38.603729999999985 28.34120999999999 41.56184999999999 29.084900000000005 43.929880000000026 z M 26.66568000000001 45.86252999999999 C 25.44328999999999 39.91390000000001 24.95064000000002 33.90701999999999 25.18765000000002 27.841909999999984 C 25.49223999999998 23.953390000000013 26.140530000000012 20.34201999999999 27.132510000000025 17.007740000000013 C 28.08841000000001 13.670979999999986 29.337019999999995 10.824990000000014 30.883249999999975 8.397739999999999 C 32.39341999999999 5.967989999999986 34.07796000000002 4.165680000000009 35.900829999999985 2.9882900000000063 C 37.53318999999999 1.9425699999999892 38.694939999999974 1.4073700000000144 39.30883 1.449700000000007 C 39.77832000000001 1.4820900000000279 40.16314 1.6896399999999971 40.50186000000002 2.038819999999987 C 40.84061000000003 2.387999999999977 41.27280000000002 2.9607899999999745 41.80088999999998 3.7212299999999914 C 45.67817000000002 10.106460000000027 47.33780999999999 17.60563000000002 46.746219999999994 26.18022000000002 C 46.465329999999994 30.251340000000027 45.65023000000002 34.17702000000003 44.29345999999998 38.06531000000001 C 42.97527000000002 41.920079999999984 41.16392999999999 45.559799999999996 38.86441000000002 48.91242999999997 C 36.52629999999999 52.29865000000001 33.859399999999994 55.19153 30.825069999999982 57.62470000000002 L 32.77080000000001 72.02147000000002 C 34.372180000000014 71.95096999999998 35.465509999999995 71.88162 36.07940000000002 71.92399999999998 C 38.82391999999999 72.11338 41.2398 72.85926 43.43531999999999 74.16915999999998 C 45.63082000000003 75.47904 47.47404 77.16278 48.92624999999998 79.25394 C 50.380949999999984 81.30908 51.45465999999999 83.62752 52.147339999999986 86.20927 C 52.803949999999986 88.78852 53.09192999999999 91.45094 52.90305000000001 94.18905000000001 C 52.60971000000001 98.44033999999999 51.221780000000024 102.25409000000002 48.74171999999999 105.59421999999995 C 46.261660000000006 108.93456000000003 42.72674000000001 111.26070000000004 38.098389999999995 112.60640999999998 C 38.265510000000006 114.39169000000004 38.59456 116.98460999999998 39.12673000000001 120.31537000000003 C 39.620299999999986 123.67987000000005 39.98052999999999 126.34738000000004 40.207449999999994 128.31755999999996 C 40.43430000000001 130.288 40.44952000000001 132.17155000000002 40.32274000000001 134.00897999999995 C 40.12637999999998 136.85506999999996 39.26625999999999 139.32960000000003 37.73988000000003 141.46880999999996 C 36.17738000000003 143.60527000000002 34.180240000000026 145.20488 31.71233000000001 146.26544 C 29.280520000000024 147.32849 26.638179999999977 147.76155000000006 23.82143000000002 147.56706999999994 C 19.84908999999999 147.29299000000003 16.459360000000004 145.93695000000002 13.649800000000027 143.53499 C 10.842729999999989 141.09672 9.460080000000005 137.99695999999994 9.579119999999989 134.16794000000004 C 9.804280000000006 132.48215000000005 10.310879999999997 130.92433000000005 11.137540000000001 129.46099000000004 C 11.964159999999993 127.99761999999998 13.02370000000002 126.8401 14.352260000000001 125.99066000000005 C 15.647209999999973 125.10244 17.162590000000023 124.70037000000002 18.867340000000013 124.70943999999997 C 20.275699999999972 124.80642999999998 21.584490000000017 125.29513999999995 22.79622999999998 126.13878 C 23.96938 127.01619000000005 24.908450000000016 128.13063999999997 25.574810000000014 129.51613999999995 C 26.205069999999978 130.89891 26.500380000000007 132.40355 26.391009999999994 133.98883 C 26.244370000000004 136.11443999999995 25.39785999999998 137.86599 23.85145 139.24342000000001 C 22.305060000000026 140.62089000000003 20.411130000000014 141.25039000000004 18.208280000000002 141.09824000000003 L 17.37772000000001 141.04107 C 18.63697000000002 143.29994999999997 20.871080000000006 144.57613000000003 24.08506 144.79805 C 25.710080000000005 144.91016000000002 27.396119999999996 144.66454 29.102030000000013 144.13048000000003 C 30.846529999999973 143.56318999999996 32.317049999999995 142.75959 33.58828999999997 141.68898000000002 C 34.85953000000001 140.61834999999996 35.738519999999994 139.44824000000006 36.15300000000002 138.17354999999998 C 36.86883 136.73892999999998 37.29939999999999 134.70525999999995 37.47588000000002 132.14736000000005 C 37.59519 130.418 37.533950000000004 128.67629 37.32826 126.92449999999997 C 37.12004999999999 125.20871999999997 36.771090000000015 122.90399000000002 36.27884 120.04659000000004 C 35.78411 117.22518000000002 35.42766999999998 115.02851999999996 35.24068999999997 113.53141000000005 C 33.03665999999998 113.92238999999995 30.77782000000002 114.05614000000003 28.430549999999982 113.89416000000006 C 24.49432999999999 113.62234000000001 20.82945000000001 112.57313999999997 17.438420000000008 110.71025999999995 C 14.047390000000007 108.84739000000002 11.131970000000024 106.40183000000002 8.65852000000001 103.33510999999999 C 6.221170000000001 100.27098999999998 4.386490000000009 96.88646 3.1594399999999894 93.10944999999998 C 1.965990000000005 89.37097999999997 1.4711200000000133 85.49968999999999 1.7084299999999928 81.53415999999999 C 2.106420000000014 77.86930999999998 3.036139999999989 74.38594999999998 4.564850000000007 71.16111000000001 C 6.096049999999991 67.90024 7.975950000000012 64.84442999999999 10.23821000000001 62.03219999999999 C 12.500409999999988 59.21992999999998 14.817430000000002 56.664890000000014 17.18682000000001 54.40305999999998 C 19.589850000000013 52.17971 22.726220000000012 49.31920000000002 26.66568000000001 45.86252999999999 z")
    private val wholeNotePath: SVGPath = parser.parse("M 9.125,0.0030002594 C 4.03428,0.18520026 0.0,2.5856003 0.0,5.5030003 C 0.0,8.5390003 4.368,11.003 9.75,11.003 C 15.132,11.003 19.5,8.5390003 19.5,5.5030003 C 19.5,2.4670003 15.132,0.0030002594 9.75,0.0030002594 C 9.53977,0.0030002594 9.33194,-0.0043997406 9.125,0.0030002594 z M 7.5,1.0655003 C 8.8579,0.92650026 10.56798,1.5561003 12,2.8467003 C 14.14502,4.7799003 14.87122,7.4906003 13.625,8.9092003 L 13.59375,8.9405003 C 12.32289,10.3506 9.53145,9.9153003 7.375,7.9717003 C 5.21855,6.0282003 4.51039,3.2881003 5.78125,1.8780003 C 6.20818,1.4043003 6.81306,1.1358003 7.5,1.0655003 z")

    fun drawPath(path: String) {
        canvas.graphicsContext2D.beginPath()
        canvas.graphicsContext2D.appendSVGPath(path)
        canvas.graphicsContext2D.closePath()
    }

    fun drawTrebleClef(x: Double, y: Double) {
        val gc = canvas.graphicsContext2D
        gc.fill = Color.BLACK
        gc.lineWidth = 1.0
        gc.moveTo(0.0,0.0)
        val path = trebleClefPath.translate(x, y)
        gc.appendSVGPath(path.toPathString())
        gc.fill()
        gc.stroke()
    }

    fun clear() {
        canvas.graphicsContext2D.beginPath()
        canvas.graphicsContext2D.clearRect(0.0,0.0, canvas.width, canvas.height)
    }

    fun drawWholeNote(x: Double, y: Double, scale: Double = 1.0) {
//        canvas.graphicsContext2D.fill = Color.BLACK
//        val path = wholeNotePath.translate(x, y).scale(scale)
//        canvas.graphicsContext2D.appendSVGPath(path.toPathString())
//        canvas.graphicsContext2D.fill()
    }

    //fun
}